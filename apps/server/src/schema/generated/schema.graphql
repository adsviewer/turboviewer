type Ad {
  adAccount: AdAccount!
  adAccountId: String!
  externalId: String!
  id: ID!
  insights(
    after: ID
    before: ID
    dateFrom: Date
    dateTo: Date
    devices: [DeviceEnum!]
    first: Int
    highestFirst: Boolean = true
    last: Int
    orderBy: InsightsColumnsOrderBy! = spend
    positions: [String!]
    publishers: [PublisherEnum!]
  ): AdInsightsConnection!
  name: String!
}

type AdAccount {
  advertisements(after: ID, before: ID, first: Int, last: Int): AdAccountAdvertisementsConnection!
  createdAt: Date!
  currency: CurrencyEnum!
  externalId: String!
  id: ID!
  integration: Integration!
  integrationId: String!
  name: String!
  updatedAt: Date!
}

type AdAccountAdvertisementsConnection {
  edges: [AdAccountAdvertisementsConnectionEdge]!
  pageInfo: PageInfo!
}

type AdAccountAdvertisementsConnectionEdge {
  cursor: ID!
  node: Ad!
}

type AdInsightsConnection {
  edges: [AdInsightsConnectionEdge]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type AdInsightsConnectionEdge {
  cursor: ID!
  node: Insight!
}

type BaseError implements Error {
  message: String!
}

type ChannelInitialProgressPayload {
  channel: IntegrationType!
  progress: Float!
}

enum CurrencyEnum {
  AFN
  ALL
  DZD
  USD
  EUR
  AOA
  XCD
  ARS
  AMD
  AWG
  AUD
  AZN
  BSD
  BHD
  BDT
  BBD
  BYN
  BZD
  XOF
  BMD
  BTN
  INR
  BOB
  BOV
  BAM
  BWP
  NOK
  BRL
  BND
  BGN
  BIF
  CVE
  KHR
  XAF
  CAD
  KYD
  CLF
  CLP
  CNY
  COP
  COU
  KMF
  CDF
  NZD
  CRC
  CUC
  CUP
  ANG
  CZK
  DKK
  DJF
  DOP
  EGP
  SVC
  ERN
  ETB
  FKP
  FJD
  XPF
  GMD
  GEL
  GHS
  GIP
  GTQ
  GBP
  GNF
  GYD
  HTG
  HNL
  HKD
  HUF
  ISK
  IDR
  XDR
  IRR
  IQD
  ILS
  JMD
  JPY
  JOD
  KZT
  KES
  KPW
  KRW
  KWD
  KGS
  LAK
  LBP
  LSL
  ZAR
  LRD
  LYD
  CHF
  MOP
  MGA
  MWK
  MYR
  MVR
  MRU
  MUR
  XUA
  MXN
  MXV
  MDL
  MNT
  MAD
  MZN
  MMK
  NAD
  NPR
  NIO
  NGN
  OMR
  PKR
  PAB
  PGK
  PYG
  PEN
  PHP
  PLN
  QAR
  MKD
  RON
  RUB
  RWF
  SHP
  WST
  STN
  SAR
  RSD
  SCR
  SLE
  SGD
  XSU
  SBD
  SOS
  SSP
  LKR
  SDG
  SRD
  SZL
  SEK
  CHE
  CHW
  SYP
  TWD
  TJS
  TZS
  THB
  TOP
  TTD
  TND
  TRY
  TMT
  UGX
  UAH
  AED
  USN
  UYI
  UYU
  UZS
  VUV
  VEF
  VED
  VND
  YER
  ZMW
  ZWL
}

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar Date

enum DeviceEnum {
  MobileWeb
  MobileApp
  Desktop
  Unknown
}

interface Error {
  message: String!
}

type FacebookError implements Error {
  code: Int!
  errorSubCode: Int!
  fbTraceId: String!
  message: String!
}

type GenerateGoogleAuthUrlResponse {
  url: String!
}

type GroupedInsight implements Pagination {
  edges: [GroupedInsights!]!
  totalCount: Int!
}

type GroupedInsights {
  adAccountId: String
  adAccountName: String
  adId: String
  adName: String
  currency: CurrencyEnum
  date: Date
  device: DeviceEnum
  iFrame: IFrame
  impressions: Int!
  position: String
  publisher: PublisherEnum
  spend: Int!
}

type IFrame {
  height: String!
  src: String!
  width: String!
}

type Insight {
  ad: Ad!
  adId: String!
  date: Date!
  device: DeviceEnum!
  id: ID!
  impressions: Int!
  position: String!
  publisher: PublisherEnum!
  spend: Int!
}

enum InsightsColumnsGroupBy {
  adAccountId
  adId
  date
  device
  position
  publisher
}

enum InsightsColumnsOrderBy {
  spend
  impressions
}

enum InsightsOrderBy {
  MobileWeb
  MobileApp
  Desktop
  Unknown
}

type Integration {
  accessTokenExpiresAt: Date
  adAccounts(currency: CurrencyEnum): [AdAccount!]!
  externalId: String
  id: ID!
  organization: Organization!
  organizationId: String!
  refreshTokenExpiresAt: Date
  type: IntegrationType!
}

type IntegrationListItem {
  authUrl: String
  status: IntegrationStatus!
  type: IntegrationType!
}

enum IntegrationStatus {
  ComingSoon
  NotConnected
  Expired
  Connected
  Revoked
}

enum IntegrationType {
  FACEBOOK
  TIKTOK
  LINKEDIN
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON

type Mutation {
  deAuthIntegration(type: IntegrationType!): MutationDeAuthIntegrationResult!
  forgetPassword(email: String!): Boolean!
  googleLoginSignup(code: String!): TokenDto!
  login(email: String!, password: String!): TokenDto!
  refreshChannels(integrationIds: [String!]): Boolean!
  refreshData: String!

  """
  Uses the refresh token to generate a new token
  """
  refreshToken: String!
  resetPassword(password: String, token: String!): TokenDto!
  signup(email: String!, firstName: String!, lastName: String!, password: String!): TokenDto!
  updateUser(firstName: String, lastName: String, newPassword: String, oldPassword: String): User!
}

union MutationDeAuthIntegrationResult = BaseError | FacebookError | MutationDeAuthIntegrationSuccess

type MutationDeAuthIntegrationSuccess {
  data: String!
}

type Organization {
  createdAt: Date!
  id: ID!
  integrations: [Integration!]!
  name: String!
  updatedAt: Date!
  users: [User!]!
}

type PageInfo {
  endCursor: ID
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: ID
}

interface Pagination {
  totalCount: Int!
}

type PrismaClientKnownRequestError implements Error {
  code: String!
  message: String!
}

enum PublisherEnum {
  Facebook
  Instagram
  Messenger
  AudienceNetwork
  LinkedIn
  TikTok
  Unknown
}

type Query {
  generateGoogleAuthUrl(state: String!): GenerateGoogleAuthUrlResponse!
  insights(
    adAccountIds: [String!]
    adIds: [String!]
    dateFrom: Date
    dateTo: Date
    devices: [DeviceEnum!]
    groupBy: [InsightsColumnsGroupBy!]
    order: String = "desc"
    orderBy: InsightsColumnsOrderBy! = spend

    """
    Starting at 1
    """
    page: Int! = 1
    pageSize: Int! = 12
    positions: [String!]
    publishers: [PublisherEnum!]
  ): GroupedInsight!
  integrations(type: IntegrationType): [Integration!]!
  lastThreeMonthsAds: [Ad!]!
  me: User!
  settingsChannels: [IntegrationListItem!]!
}

type Subscription {
  channelInitialSetupProgress: ChannelInitialProgressPayload!
}

type TokenDto {
  refreshToken: String!
  token: String!
  user: User!
}

type User {
  createdAt: Date!
  email: String!
  firstName: String!
  id: ID!
  lastName: String!
  organization: Organization!
  organizationId: ID!
  roles: [String!]!
  updatedAt: Date!
}

type ZodError implements Error {
  fieldErrors: [ZodFieldError!]!
  message: String!
}

type ZodFieldError {
  message: String!
  path: [String!]!
}
